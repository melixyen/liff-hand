<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>LIFF å¯«æ˜¥è¯æŠ½ç¥ç¦</title>
<style>
html {
    font-size: 10vw;
}
body {
	font-size: 0.5rem;
	margin: 0px 2vw;
    background-color: #e9e4c9;
}
.textA {
    font-size: 0.5rem;
    line-height: 0.63rem;
    color: #7c4804;
}
.textB {
    font-size: 0.4rem;
    line-height: 0.5rem;
    color: #0B4E75;
}
.textC, .textC1, .textC2 {
    font-size: 0.32rem;
    line-height: 0.4rem;
    min-height: 0.4rem;
    color: #a02421;
}
.textC1 {
    color: #666;
}
.textC2 {
    color: #1c814b;
}
.textError1 {
    font-size: 0.38rem;
    line-height: 0.42rem;
    color: #F23;
}
.switchagg{
    display: inline-block;
    line-height: 1rem;
}
.springKey{
    border: 1px solid #A29116;
    box-sizing: border-box;
    padding: 0.2rem;
}
.spInput{
    width: 80%;
    padding: 2px;
    font-size: 0.5rem;
}

/* åˆ‡æ›é–‹é—œ */
.btnSwitch{
    position: relative;
    height: 1rem;
    width: 1.7rem;
    background-color: #FFF;
    box-sizing: border-box;
    border: 0.1rem solid #0acc2e;
    border-radius: 0.5rem;
}
.btnSwitch.off{
    border: 0.1rem solid #6f7470;
}
.btnSwitch .toggle{
    position: absolute;
    top: 0.05rem;
    left: 0.05rem;
    height: 0.7rem;
    width: 0.7rem;
    box-sizing: border-box;
    border-radius: 0.8rem;
    background-color: #0acc2e;
}
.btnSwitch.off .toggle{
    left: auto;
    right: 0.05rem;
    background-color: #6f7470;
}

.btnType1, .btnType2, .btnType3, .btnType3A, .btnType5{
    box-sizing: border-box;
    border-radius: 0.5rem;
    border: 0.1rem solid #092168;
    background-color: #092168;
    color: #efefef;
    cursor: pointer;
    text-align: center;
    padding: 0.2rem;
    margin: 0.2rem 0;
    font-size: 0.5rem;
}
.btnType2 {
    background-color:#dd3b0a;
    border-color:#dd3b0a;
}
.btnType3{
    display: inline-block;
    background-color: #d3b73b;
    color: #333;
    border-color: #333;
}
.btnType3A{
    display: inline-block;
    background-color: #333;
    color: #d3b73b;
    border-color: #333;
}
.btnType5{
    background-color: #fa0808;
    color: #ffd700;
    border-color: #ffd700;
}
.inBlk{display: inline-block;}
.fLeft{float: left;}

.bgST{
    background-color: #F02323;
}
.fontST{
    font-size: 0.66rem;
}
.h3CSS{
    line-height: 0.8rem;
    height: 0.82rem;
    text-align: center;
    letter-spacing: 0.5rem;
}
.h2CSS{
    width: 1.3rem;
    text-align: center;
    padding: 1rem 0;
}
.color_black{color:#111;}
.color_gold{color:#ffd700;}

/* Popup */
#pop{
    position: fixed;
    display: none;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    z-index: 1000;
    top: 0;
    left: 0;
    opacity: 1;
    transition: opacity 1s ease;
}
#pop.show{
    display: block;
}

#pop .bg1{
    background-color: rgba(88,88,88,0.6);
    z-index: 1002;
    position: absolute;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
}
#pop .text{
    color: #f2f2f2;
    text-align: center;
}
#pop .out{
    background-color: #3456ba;
    box-sizing: border-box;
    border: 0.1rem solid #234589;
    padding: 0.4rem 0.2rem;
    margin: 0;
    position: absolute;
    top:50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1004;
    min-width: 7rem;
}
#pop .bottomArea{
    background-color: #3456ba;
    box-sizing: border-box;
    position: absolute;
    bottom: 0;
    height: 1.2rem;
    padding: 0.2rem 0;
    z-index: 1003;
    width: 100vw;
}
#pop .btnOfMsg{
    box-sizing: border-box;
    display: inline-block;
    border-radius: 0.3rem;
    color: #fefefe;
    background-color: #234589;
    margin: 0 0.3rem;
    padding: 0.1rem 0.2rem;
    font-size: 0.5rem;
}

@media screen and  (orientation: portrait) {
    #pop .bottomArea{
        height: 2.2rem;
        padding-top: 0.4rem;
    }
    #pop .btnOfMsg{
        font-size: 0.6rem;
        padding: 0.2rem 0.4rem;
    }
}

.no_under{
    text-decoration: none;
}
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue-router@2.7.0/dist/vue-router.js"></script>
<script type="text/javascript" src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
<!--<script type="text/javascript" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>-->
<script type="text/javascript" src="https://melixapi.000webhostapp.com/linebotGroupBuy/liff/pmsg.js"></script>
<!--<script type="text/javascript" src="https://melixyen.github.io/liff-hand/liffhand2.js"></script>-->
<script src="https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js"></script>
<script src="./clean000.js"></script>

<script type="text/javascript">
//   var vConsole = new VConsole();
Vue.config.productionTip = false;

var liffParam = localStorage.getItem('LIFF_PARAM');
var GetP = (function(){
        var s = location.search, aryParam, tmpParam, rt = {};
        if(s.indexOf('?')!=-1){
            aryParam = s.split('?')[1].split('&');
            aryParam.map(function(tmpA){
                tmpParam = tmpA.split('=');
                rt[tmpParam[0]] = decodeURIComponent(tmpParam[1]);
            });
            if(liffParam && rt['code']){
                var objLiffParam = JSON.parse(liffParam);
                for(var k in objLiffParam){
                    if(!rt[k]) rt[k] = objLiffParam[k];
                }
            }
            localStorage.setItem('LIFF_PARAM', JSON.stringify(rt));
        }
        return rt;
})();

var GB = {
    ac: GetP.ac,
    profile: {
        displayName: 'å°æ˜ğŸ”€',
        pictureUrl: 'https://i.imgur.com/eGWaGSg.jpg',
        userId: 'Kde49ee52b3ea232fbe032e440c8bedc5'
    },
    sendRoomAD: function(h1, h2, h3, L2R, color, editURL, lotURL){
        var fc = (color=='gold') ? '#ffd700' : '#111111';
        var aryH1 = h1.split('');
        var aryH2 = h2.split('');
        var aryH3 = (!!h3) ? h3.split('') : [];
        if(!L2R){ aryH3.reverse(); }
        var aryContent = [];
        if(aryH3.length>0){
            aryH3 = aryH3.map(function(word){
                return {
                    "type": "text", "text": word, "wrap": true, "color": fc, "align": "center",
                    "size": "xxl", "weight": "bold",
                    "flex": 1
                }
            })
            var h3Obj = {
                    "type": "box",
                    "layout": "baseline",
                    "spacing": "sm",
                    "backgroundColor": "#fd2323",
                    "contents": aryH3
            }
            aryContent.push(h3Obj);
        }

        var h12Separator = {
            "type": "box",
            "layout": "vertical",
            "margin": "xxl",
            "spacing": "sm",
            "backgroundColor": "#8c5020",
            "contents": [
                { "type": "text", "text": "\n", "wrap": true, "weight": "bold", "color": "#100010", "size": "xxl" }
            ]
        }
        var h12SeparatorA = {
            "type": "box",
            "layout": "vertical",
            "margin": "sm",
            "spacing": "sm",
            "backgroundColor": "#8c5020",
            "contents": [
                { "type": "text", "text": "\n", "wrap": true, "weight": "bold", "color": "#100010", "size": "xxl" }
            ]
        }

        var wordH1 = aryH1.join('\n'), wordH2 = aryH2.join('\n');
        if(!L2R){
            wordH1 = aryH2.join('\n'); wordH2 = aryH1.join('\n');
        }

        function makeH12Obj(wordS, colorS){
            return {
                "type": "box", "layout": "vertical", "margin": "xxl", "spacing": "sm",
                "backgroundColor": "#fd2323",
                "contents": [
                    {
                        "type": "text",
                        "text": wordS,
                        "wrap": true,
                        "align": "center",
                        "weight": "bold",
                        "color": colorS,
                        "size": "xxl"
                    }
                ]
            }
        }

        var h12Obj =  {
            "type": "box",
            "layout": "horizontal",
            "margin": "xxl",
            "spacing": "sm",
            "contents": [
                makeH12Obj(wordH1, fc),
                h12Separator,
                h12SeparatorA,
                makeH12Obj(wordH2, fc),
            ]
        }
        aryContent.push(h12Obj);

        if(lotURL){
            var lotBtnObj = {
                "type": "box", "layout": "horizontal", "margin": "xxl", "spacing": "sm",
                "contents": [{
                    "type": "button",
                    "style": "primary",
                    "color": "#cca840",
                    "action": {
                        "type": "uri",
                        "label": "æ‰“é–‹ç¥ç¦ï¼ç´…åŒ…",
                        "uri": lotURL
                    }
                }]
            }
            aryContent.push(lotBtnObj);
        }
        
        var msgObj = {
            "type": "bubble",
            "styles": { "footer": { "separator": true } },
            "body": {
                "type": "box",
                "layout": "vertical",
                "contents": aryContent
            },
            "footer": {
                "type": "box",
                "layout": "vertical",
                "spacing": "sm",
                "contents": [
                {
                    "type": "button",
                    "style": "link",
                    "height": "sm",
                    "action": {
                    "type": "uri",
                    "label": "è½‰ç™¼æ˜¥è¯é€£çµ",
                    "uri": editURL
                    }
                },
                {
                    "type": "button",
                    "style": "link",
                    "height": "sm",
                    "action": {
                    "type": "uri",
                    "label": "æˆ‘è¦å¯«æ–°çš„æ˜¥è¯",
                    "uri": SERVER_URL_PATH
                    }
                },
                {
                    "type": "spacer",
                    "size": "sm"
                }
                ],
                "flex": 0
            }
        }
        var a = liff.sendMessages([{
            type: "flex",
            altText: h1 + '\n' + h2,
            contents: msgObj
        }]).then(function(e){
        });
        pmsg.tip('æ­£åœ¨å¹«ä½ è²¼æ˜¥è¯åˆ°èŠå¤©å®¤');
        return msgObj;
    }
}

var ytbURL = 'https://youtu.be/ozvUvTEBMnA';
//https://melixapi.000webhostapp.com/linebotPKuma/spt.html
// var SERVER_URL_PATH = 'https://liff.line.me/1653774878-bqoNoYlE/linebotPKuma/spt.html';
var SERVER_URL_PATH = 'line://app/1653774878-bqoNoYlE';
var aryExample = [
    ['å¤©å¢æ­²æœˆäººå¢å£½','æ˜¥æ»¿ä¹¾å¤ç¦æ»¿å ‚','å¹´å¹´æœ‰é¤˜'],
    ['å¤©å°‡åŒ–æ—¥èˆ’æ¸…æ™¯','å®¤æœ‰æ˜¥é¢¨èšå¤ªå’Œ','å››å­£å¹³å®‰'],
    ['ä¸‰æ˜¥æ·‘æ°£ç›ˆé–€å®¤','è¬é‡Œç¥¥å…‰æ»¿æ–—æ–‡','ç™¾å¹´äº‹æ¥­ç´¹ç®•è£˜'],
    ['å®¶ç¥¥ä¸–è¡ç„¡ç–†æ…¶','åœ‹æ³°å¤©é–‹ä¸è€æ˜¥','æˆ¶ç´æ˜¥é¢¨å‰æ…¶å¤š'],
    ['ç‘æ—¥èŠè˜­å…‰ç”²ç¬¬','æ˜¥é¢¨æ£ æ££æŒ¯å®¶è²','ä¸€ä»£ç®•è£˜ä¸–æ¥­é•·'],
    ['äº”è‰²é›²ä¸­é–‹æ›‰æ—¥','è¬å¹´æä¸Šå‹•æ˜¥é¢¨','ä¸€é“ç¥¥å…‰é¨°å‰å®‡'],
    ['ä¸‰é™½æ—¥ç…§å¹³å®‰åœ°','äº”ç¦æ˜Ÿè‡¨å‰æ…¶å®¶','å››å­£å¹³å®‰'],
    ['æ¾ç«¹æ¢…æ­²å¯’ä¸‰å‹','æ¡ƒæææ˜¥é¢¨ä¸€å®¶','æ¤¿è±ä¸¦èŒ‚'],
    ['æ˜¥å¤ç§‹å†¬é›†åƒç¥¥','æ±å—è¥¿åŒ—è¿ç™¾ç¦','å¹´å¹´æœ‰é¤˜'],
    ['é¼ éŒ¢é¼ æˆ¿ä¸é¼ å‚µå‹™è¡¨','è²ªåƒè²ªå–ä¸è²ªå°ä¾¿å®œ','æ†‘è‰¯å¿ƒé¼ éˆ”ç¥¨'],
    ['è«–æ–‡å°ˆé¡Œè¼•é¬†é','æº–æ™‚ç•¢æ¥­ä¸ç•™ç´š','æ•™æˆæ”¾äºº'],
    ['é¼ éˆ”ç¥¨é¼ åˆ°æ‰‹è»Ÿ','ç¡å¤§è¦ºç¡åˆ°é»ƒæ˜','é ­å½©ä¾†ä¸€å¼µ'],
    ['æ—¥å‡ºå”¸æ›¸è¦‹æœˆæ­¸','é¼ ä¸€é¼ äºŒå¥½æˆç¸¾','åŠªåŠ›ç”¨åŠŸ'],
    ['é¼ å±ä¸ç›¡çš„è²¡å¯Œ','ç”¨ä¹‹ä¸ç«­çš„å¥åº·','å¹³å®‰å¯Œè²´']
];
function lotteryExample(){
    var len = aryExample.length;
    var idx = Math.floor(Math.random() * len);
    return aryExample[idx];
}

function str2Int(uid){
    
    var aryUID = uid.split('');
    var ascTotal = 0;
    aryUID.map(function(w){
        ascTotal += w.charCodeAt();
    })
    var idx = ascTotal % 4;
    console.log('ascTotal:' + ascTotal + ' , ' + idx);
}

function initVue(){
    
    var indexArea = {
        template: `<div>
            <div style="margin:2rem 0;" v-if="flagShowPushRoomBtn">
                <div class="btnType5" v-on:click="pushRoom">å¹«èŠå¤©å®¤é–€è²¼æ˜¥è¯</div>
                <div style="visibility:hidden;"><textarea>{{roomMsgJSON}}</textarea></div>
                <div class="btnType2" v-on:click="copyGenFn()">è¤‡è£½æ˜¥è¯é€£çµ</div>
            </div>
            <div>
                <a href="https://youtu.be/ozvUvTEBMnA" target="_blank" class="no_under"><div class="btnType5">æ•™å­¸å½±ç‰‡(å°‡é€£åˆ° Youtube)</div></a>
            </div>
            <div class="textB" v-if="!flagShowPushRoomBtn">å¿«ä¾†å¯«ä½ çš„å°ˆå±¬å°è¯å†è¤‡è£½æ˜¥è¯ç¶²å€è²¼åˆ°å…¶ä»–èŠå¤©å®¤å¾Œé»é–‹åŸ·è¡Œ[è²¼æ˜¥è¯]ã€‚</div>
            <div class="textB" v-if="flagShowPushRoomBtn">è¦ç·¨è¼¯æ­¤æ˜¥è¯è«‹åœ¨ä¸‹æ–¹ä¿®æ”¹</div>
            <div class="springKey">
                <div>
                    <div v-bind:class="cssFL2RBtn(false)" v-on:click="L2R=false">ç”±å³è‡³å·¦</div>
                    <div v-bind:class="cssFL2RBtn(true)" v-on:click="L2R=true">ç”±å·¦è‡³å³</div>
                </div>
                <div>
                    <div v-bind:class="cssFontColorBtn('black')" v-on:click="fc='black'">é»‘è‰²å­—</div>
                    <div v-bind:class="cssFontColorBtn('gold')" v-on:click="fc='gold'">é‡‘è‰²å­—</div>
                </div>
                <div class="textA">ä¸Šè¯</div>
                <input type="text" v-model="h1" class="spInput" maxlength="15">
                <div style="margin:0.5rem 0;"> </div>
                <div class="textA">ä¸‹è¯</div>
                <input type="text" v-model="h2" class="spInput" maxlength="15">
                <div style="margin:0.5rem 0;"> </div>
                <div class="textA">æ©«æ‰¹</div>
                <input type="text" v-model="h3" class="spInput" maxlength="7" style="width:70vw;" placeholder="æ©«æ‰¹å¯ç•™ç©º">
                <div style="margin:0.3rem 0;"> </div>
                <div>
                    <div class="btnType2 inBlk" v-on:click="lotStr">éš¨æ©Ÿç”¢ç”Ÿæ˜¥è¯</div>
                    <div class="btnType2 inBlk" v-on:click="clearFn">æ¸…é™¤</div>
                </div>
                <div style="margin:0.5rem 0;"> </div>
            </div>
            <div>
                <div class="bgST fontST h3CSS" v-show="!!h3" v-bind:class="cssFontColor()">{{h3Display}}</div>
                <div style="margin-top: 0.8rem; display:inline-block; width:100%;">
                    <div style="float:left" class="bgST fontST h2CSS" v-show="!!h1 || !!h2" v-html="leftDisplay" v-bind:class="cssFontColor()"></div>
                    <div style="float:right" class="bgST fontST h2CSS" v-show="!!h1 || !!h2" v-html="rightDisplay" v-bind:class="cssFontColor()"></div>
                </div>
            </div>
            <div class="springKey" style="min-height: 60px;">
                <div class="fLeft">
                    <div class="btnSwitch" v-bind:class="isAppendFuCSS" v-on:click="ap=!ap"><div class="toggle"></div></div>
                </div>
                <div class="fLeft" style="height:26px;">
                    <div class="textA" style="line-height: 1rem; margin-left:0.1rem;">é™„åŠ æŠ½ç¥ç¦ï¼ç´…åŒ…åŠŸèƒ½</div>
                </div>
                <div v-show="ap" style="clear:left;">
                    <div class="textB">ä½ å¯ä»¥è‡ªè¨‚å››å€‹ç¥ç¦è©±èªï¼Œæˆ–è€…å¡«å…¥ç´…åŒ…é‡‘é¡ï¼Œæˆ–è€…å¡«å…¥æŠ½çç‰©å“ï¼Œæ‰€æœ‰é¸é …æ©Ÿç‡å‡ç­‰ï¼Œé™è¼¸å…¥åå­—ã€‚</div>
                    <div>
                        <div class="btnType2 inBlk" v-on:click="lotPray">ç¥ç¦ç¯„ä¾‹</div>
                        <div class="btnType2 inBlk" v-on:click="lotCash">ç´…åŒ…ç¯„ä¾‹</div>
                    </div>
                    <ol>
                        <li><input type="text" v-model="z1" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z2" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z3" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z4" class="spInput" maxlength="10" style="width:70vw;"></li>
                    </ol>
                </div>
            </div>
            <div class="springKey" style="min-height: 60px; margin-bottom: 50px;">
                <div class="textB">ç”¢ç”Ÿ LINE èŠå¤©å®¤é»æ“Šé€£çµå¾Œå°‡ä»–è¤‡è£½èµ·ä¾†è²¼åˆ°å…¶ä»–èŠå¤©å®¤å†é»é–‹é€£çµå°±å¯ä»¥æŒ‰ä¸‹ [è²¼æ˜¥è¯] æŒ‰éˆ•å‘èŠå¤©å®¤è²¼ä¸Šè‡ªå·±è¼¸å…¥çš„æ˜¥è¯</div>
                <div class="btnType2" v-on:click="gen()">ç”¢ç”Ÿé€£çµ</div>
                <div v-show="!!api"><textarea style="width:calc(100vw - 1.3rem); height:2rem; font-size:12px;" readonly>{{api}}</textarea></div>
                <div v-show="!!api" class="btnType2" v-on:click="copyGenFn()">è¤‡è£½é€£çµ</div>
                <div v-show="!!api" class="btnType2" v-on:click="pushDirectly()">å¹«èŠå¤©å®¤é–€è²¼æ˜¥è¯</div>
                <div class="btnType1" v-on:click="closeFn()">é—œé–‰ LIFF æ˜¥è¯ APP</div>
            </div>
        </div>`,
        computed: {
            isL2RCSS: function(){
                return (this.L2R) ? '' : 'off';
            },
            isAppendFuCSS: function(){
                return (this.ap) ? '' : 'off';
            },
            h3Display: function(){
                var a = this.h3;
                if(!this.L2R){
                    a = a.split('').reverse().join('');
                }
                return a;
            },
            leftDisplay: function(){
                var tmpA = (this.L2R) ? this.h1 : this.h2;
                return tmpA.split('').join('<br>');
            },
            rightDisplay: function(){
                var tmpA = (this.L2R) ? this.h2 : this.h1;
                return tmpA.split('').join('<br>');
            }
        },
        data: function(){return {
            flagShowPushRoomBtn: false,
            roomMsgJSON: '',
            h1: '', h2: '', h3: '', fc: 'black',
            z1: '', z2: '', z3: '', z4: '',
            L2R: false,
            ap: false,
            api: '', lotteryURL: ''
        }},
        methods: {
            cssFontColorBtn: function(color){
                return (color==this.fc) ? 'btnType3A' : 'btnType3';
            },
            cssFL2RBtn: function(b){
                return (b==this.L2R) ? 'btnType3A' : 'btnType3';
            },
            cssFontColor:function(){
                return 'color_' + this.fc;
            },
            clearFn: function(){this.h1='';this.h2='';this.h3='';},
            closeFn: function(){liff.closeWindow();},
            copyGenFn: function(){
                this.gen();
                this.copyFn();
            },
            copyFn: function(){
                var el = document.createElement('textarea');
                el.value = this.api;
                document.body.appendChild(el);
                el.select();
                var flgA = document.execCommand('copy');
                document.body.removeChild(el);
                if(!flgA){
                    pmsg.alert('è¤‡è£½å¤±æ•—ï¼');
                }else{
                    pmsg.tip('è¤‡è£½æˆåŠŸ')
                }
            },
            gen: function(){
                var spOK = (!!this.h1 && !!this.h2);
                var lotOK = (this.ap && !!this.z1 && !!this.z2 && !!this.z3 && !!this.z4);
                var aryParam = [];
                var st = SERVER_URL_PATH + '?ac=1&';

                if(!spOK){ alert('æ˜¥è¯ä¼¼ä¹æ²’æœ‰å¯«å®Œå–”ï¼Œè«‹å†æª¢æŸ¥ä¸€æ¬¡'); return false; }
                aryParam.push('h1=' + encodeURIComponent(this.h1));
                aryParam.push('h2=' + encodeURIComponent(this.h2));
                if(!!this.h3) aryParam.push('h3=' + encodeURIComponent(this.h3));
                aryParam.push('fc=' + encodeURIComponent(this.fc));

                if(this.L2R) aryParam.push('L2R=1');

                if(this.ap && !lotOK){ alert('æ‚¨ä¼¼ä¹å•Ÿç”¨äº†æŠ½ç¥ç¦åŠŸèƒ½å»æœªè¼¸å…¥å®Œå››å€‹å…§å®¹ï¼Œè«‹å†æª¢æŸ¥ä¸€æ¬¡'); return false;}
                if(this.ap){
                    var lotAryParam = ['z1=' + encodeURIComponent(this.z1), 'z2=' + encodeURIComponent(this.z2), 'z3=' + encodeURIComponent(this.z3), 'z4=' + encodeURIComponent(this.z4)];
                    aryParam.push('z1=' + encodeURIComponent(this.z1));
                    aryParam.push('z2=' + encodeURIComponent(this.z2));
                    aryParam.push('z3=' + encodeURIComponent(this.z3));
                    aryParam.push('z4=' + encodeURIComponent(this.z4));
                    this.lotteryURL = SERVER_URL_PATH + '?ac=2&' + lotAryParam.join('&') + '&dp=' + encodeURIComponent(GB.profile.displayName);
                }

                st += aryParam.join('&');
                this.api = st;
            },
            lotCash: function(){
                this.z1 = '600';this.z2 = '1000';this.z3 = '1200';this.z4 = '2000';
            },
            lotPray: function(){
                this.z1 = 'å¿ƒæƒ³äº‹æˆ';this.z2 = 'èº«é«”å¥åº·';this.z3 = 'è²¡æºå»£é€²';this.z4 = 'é£›é»ƒé¨°é”';
            },
            lotStr: function(){
                var a = lotteryExample();
                this.h1 = a[0];
                this.h2 = a[1];
                if(a[2]) this.h3 = a[2];
            },
            pushDirectly: function(){
                var lotURL = undefined;
                var lotOK = (this.ap && !!this.z1 && !!this.z2 && !!this.z3 && !!this.z4);
                if(this.ap && lotOK){
                    lotURL = this.lotteryURL;
                }
                this.roomMsgJSON = JSON.stringify(GB.sendRoomAD(this.h1, this.h2, this.h3, this.L2R, this.fc, this.api, lotURL));
            },
            pushRoom: function(){
                this.gen();
                this.pushDirectly();
            }
        },
        mounted: function(){
            GB.app1 = this;
            if(GetP.ac==1){
                this.flagShowPushRoomBtn = true;
                this.h1 = GetP.h1;
                this.h2 = GetP.h2;
                if(GetP.h3) this.h3 = GetP.h3;
                if(GetP.L2R==1) this.L2R = true;
                if(GetP.fc) this.fc = GetP.fc;
                if(GetP.z1) this.z1 = GetP.z1;
                if(GetP.z2) this.z2 = GetP.z2;
                if(GetP.z3) this.z3 = GetP.z3;
                if(GetP.z4) this.z4 = GetP.z4;
                if(GetP.z1 && GetP.z2 && GetP.z3 && GetP.z4) this.ap = true;
            }
        }
    };
    
    var aboutArea = {
        template: '<div>' +
            '<div v-html="kss"></div>' +
        '</div>', 
        data: function(){return {
            kss: '<ul>' +
                '<li>ç™¼è¡Œå–®ä½ï¼š<span style="background-color: #BBB;"><span style="color:blue;">æ¥µ</span><span style="color:#FEFE11;">å…‰</span><span style="color:#005530;">é§­</span><span style="color:red;">å®¢</span></span></li>' +
                '<li>ç¨‹å¼åç¨±ï¼šLIFF å¯«æ˜¥è¯æŠ½ç¥ç¦</li>' +
                '<li>å»ºç«‹æ–¹å¼ï¼šå¡«å¯«ä¸Šä¸‹è¯ï¼Œæ©«æ‰¹å¯é¸ï¼Œå¯é™„åŠ ç¥ç¦æˆ–ç´…åŒ…</li>' +
                '</ul>'
        }}
    };

    var lotArea = {
        template: `
            <div>
                <div>ç•¶ä½ æº–å‚™å¥½äº†ï¼Œå°±æŒ‰ä¸‹é¢çš„æŒ‰éˆ•ï¼</div>
                <div class="btnType5" v-on:click="open">æ‰“é–‹ç¥ç¦ï¼ç´…åŒ…</div>
                <div style="visibility:hidden;"><textarea>{{roomMsgJSON}}</textarea></div>
            </div>
        `,
        computed: {
            season: function(){
                
            }
        }, 
        data: function(){return {
            kcc: 1,
            roomMsgJSON: '',
            dp: '',
            z1: '', z2: '', z3: '', z4: ''
        }},
        methods: {
            open: function(){
                var retStr = '', ascTotal = 0;
                var uid = GB.profile.userId;
                var aryUID = uid.split('');
                aryUID.map(function(w){
                    ascTotal += w.charCodeAt();
                })
                var idx = ascTotal % 4;
                var aryZ = [this.z1, this.z2, this.z3, this.z4];
                retStr = aryZ[idx];
                if(liff.sendMessages){
                    var aryM = [];
                    if(this.dp){
                        aryM.push({
                            "type": "box", "layout": "horizontal", "backgroundColor": "#cb111f", "spacing": "sm",
                            "contents": [{
                                "type": "text",
                                "text": this.dp,
                                "wrap": true, "color": "#efd0cb", "align": "center", "size": "xl",
                                "weight": "bold"
                            }]
                        });
                        aryM.push({
                            "type": "box", "layout": "horizontal", "spacing": "sm",
                            "contents": [{
                                "type": "text",
                                "text": "è´ˆé€çš„ç¥ç¦ï¼ç´…åŒ…",
                                "wrap": true, "color": "#e8a730", "align": "center", "margin": "md",
                                "size": "md"
                            }]
                        });
                    }
                    var userImage = (GB.profile.pictureUrl) ? GB.profile.pictureUrl : 'https://i.imgur.com/iARuNO0.jpg';
                    var userName = (GB.profile.displayName) ? GB.profile.displayName : 'ä¸ä¿±åè€…';
                    aryM.push({
                        "type": "box", "layout": "baseline", "backgroundColor": "#cb111f", "margin": "md",
                        "contents": [{
                            "type": "icon", "url": userImage, "size": "3xl"
                        }, {
                            "type": "text", "text": userName, "weight": "bold", "color": "#efd0cb", "size": "xl"
                        }]
                    })
                    aryM.push({
                        "type": "box", "layout": "horizontal", "spacing": "sm",
                        "contents": [{
                            "type": "text", "text": "æŠ½åˆ°äº†", "color": "#e8a730", "align": "center", "size": "md"
                        }]
                    });
                    aryM.push({
                        "type": "box", "layout": "horizontal", "backgroundColor": "#cc8a40", "margin": "md",
                        "contents": [{
                            "type": "text", "text": retStr, "color": "#fefefe",
                            "wrap": true, "align": "center", "size": "xxl"
                        }]
                    });
                    
                    var msgObj = {
                        "type": "bubble",
                        "styles": { "footer": { "separator": true } },
                        "body": {
                            "type": "box",
                            "layout": "vertical",
                            "backgroundColor": "#cb111f",
                            "contents": aryM
                        }
                    }
                    var a = liff.sendMessages([{
                        type: "flex",
                        altText: this.dp + 'è´ˆäºˆ' + GB.profile.displayName + 'çš„ç¥ç¦ï¼ç´…åŒ…',
                        contents: msgObj
                    }]).then(function(e){
                    });
                    this.roomMsgJSON = JSON.stringify(msgObj);
                    pmsg.tip('é–‹ç');
                }else{
                    pmsg.tip('ç™¼ç”ŸéŒ¯èª¤ï¼Œç„¡æ³•é–‹ç')
                }
                setTimeout(function(){
                    liff.closeWindow();
                },3000)
            }
        },
        mounted: function(){
            GB.app2 = this;
            if(GetP.ac==2){
                if(GetP.z1) this.z1 = GetP.z1;
                if(GetP.z2) this.z2 = GetP.z2;
                if(GetP.z3) this.z3 = GetP.z3;
                if(GetP.z4) this.z4 = GetP.z4;
                this.dp = GetP.dp || '';
            }
        }
    }

    var mainRoute = new VueRouter({
            routes: [
                {path: '/', component: indexArea},
                {path: '/lot', component: lotArea},
                {path: '/about', name: 'about', component: aboutArea},
                {path: '*', component: indexArea}
            ]
    });

    var tpl = Vue.compile('<div id="main">' + 
            '<router-view></router-view>' +
            '<div id="statusBar"></div>' +
        '</div>');

    var main = new Vue({
            router: mainRoute,
            render: tpl.render,
            el: '#main'
    });

    if(GetP.ac==2){
        location.hash = '#/lot'
    }
}

var hand = {};
function loginFn(){
    hand.data = data;
    var initThis = this;
    var r = arguments;
    liff.getProfile(function(pFile){
        hand.profile = pFile;
        if(typeof(successFn)=='function'){
            successFn.apply(initThis, r);
        }
    })
}
function initFn(){
    if(/localhost|^file/.test(location.href) || location.hash=='#/do' || /docc/.test(location.search)){
        liff.sendMessages = function(){return {then:function(){}} }
            initVue();
        return false;
    }
    // liff.init({liffId:'1653659221-nJx5AVL1'}, function(data){//V2
    liff.init(function(data){//V1
        if(!liff.getOS) liff.getOS = function(){return 'android'; }
        if(!liff.isLoggedIn) liff.isLoggedIn = function(){return true; }
        hand.isInWeb = !!(liff.getOS()=='web');
        if(hand.isInWeb && !liff.isLoggedIn()){
            liff.login({
                redirectUri: location.href
            });
        }else{
            liff.getProfile().then(function(e){
                GB.profile = e;
                initVue();
            }).catch(function(e){
                alert('æŠ±æ­‰ï¼Œå› æ‚¨çš„æ‰‹æ©Ÿä¸­ LIFF APP é‹ä½œä¹‹ LINE ç„¡æ³•å–å¾—ç”¨æˆ¶è³‡è¨Šå› æ­¤ç„¡æ³•ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚')
            })
        }
    }, function(){
        if(typeof(errorFn)=='function') errorFn.apply(this, arguments);
    })
}
</script>

</head>
<body onload="initFn()">
    <div id="main"></div>
    <div id="pop"></div>
</body>
</html>